<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alert Test Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Alert System Test</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">Test Custom Alert Function</h2>
            <button id="test-alert-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md shadow-md transition duration-300">
                Test Custom Alert
            </button>
        </div>
        
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">Test Validation Errors</h2>
            <button id="test-station-mismatch" class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md shadow-md transition duration-300 mr-4">
                Test Station Mismatch
            </button>
            <button id="test-date-mismatch" class="bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md shadow-md transition duration-300">
                Test Date Mismatch
            </button>
        </div>
        
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold mb-4">Console Log</h2>
            <div id="console-log" class="bg-gray-100 p-4 rounded-md font-mono text-sm max-h-64 overflow-y-auto">
                <p class="text-gray-500">Console logs will appear here...</p>
            </div>
        </div>
    </div>

    <script>
        // Custom alert function (same as in app.js)
        function showCustomAlert(message) {
            console.log('showCustomAlert called with:', message);
            
            try {
                // Create alert container if it doesn't exist
                let alertContainer = document.getElementById('customAlertContainer');
                if (!alertContainer) {
                    alertContainer = document.createElement('div');
                    alertContainer.id = 'customAlertContainer';
                    alertContainer.className = 'fixed bottom-4 right-4 z-50';
                    document.body.appendChild(alertContainer);
                }

                // Create alert element
                const alert = document.createElement('div');
                alert.className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 shadow-lg max-w-md';
                alert.innerHTML = `
                    <span class="block sm:inline mr-8">${message}</span>
                    <span class="absolute top-0 bottom-0 right-0 px-4 py-3">
                        <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                            <title>Close</title>
                            <path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/>
                        </svg>
                    </span>
                `;

                // Add to container
                alertContainer.appendChild(alert);

                // Add click handler to close button
                const closeButton = alert.querySelector('svg');
                closeButton.addEventListener('click', () => {
                    alert.remove();
                });

                // Auto remove after 8 seconds
                setTimeout(() => {
                    if (alert.parentNode) {
                        alert.remove();
                    }
                }, 8000);
                
                console.log('Custom alert created successfully');
                logToConsole('Custom alert created successfully');
            } catch (error) {
                console.error('Error creating custom alert:', error);
                logToConsole('Error creating custom alert: ' + error.message);
                // Fallback to browser alert
                alert(message);
            }
        }

        // Function to log to the console display
        function logToConsole(message) {
            const consoleLog = document.getElementById('console-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('p');
            logEntry.className = 'text-gray-700 mb-1';
            logEntry.textContent = `[${timestamp}] ${message}`;
            consoleLog.appendChild(logEntry);
            consoleLog.scrollTop = consoleLog.scrollHeight;
        }

        // Event listeners
        document.getElementById('test-alert-btn').addEventListener('click', function() {
            logToConsole('Test alert button clicked');
            showCustomAlert('This is a test alert message to verify the alert system is working!');
        });

        document.getElementById('test-station-mismatch').addEventListener('click', function() {
            logToConsole('Test station mismatch button clicked');
            showCustomAlert('Station code mismatch: METAR = VABB, Warning = VAPO\n\nPlease ensure both files are for the same station.');
        });

        document.getElementById('test-date-mismatch').addEventListener('click', function() {
            logToConsole('Test date mismatch button clicked');
            showCustomAlert('No METAR data falls within the valid warning period (within 30 days)\n\nPlease check that the METAR data covers the warning period and that the warning file contains a valid issue date.');
        });

        // Log initial load
        logToConsole('Alert test page loaded');
    </script>
</body>
</html> 